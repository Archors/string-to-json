const data = require("../edit.json");
//need to Load txt file
//Read file
const fs = require("fs");
try {
  var dataToChange = fs.readFileSync("text.txt", "utf8");
} catch (err) {
  console.error(err);
}

const dataToChangeArray = dataToChange.split(/\r?\n/); //Array of each line
console.log(dataToChangeArray[0]);
//const dataFinal = changeJSON(data, dataToChangeArray[0]);
const dataFinal = changeJSONWithArray(data, dataToChangeArray);
console.log(dataFinal);
parseTxt(dataToChangeArray[0]);

function parseTxt(txt: string) {
  while (txt.includes(".")) {
    txt = txt.replace(".", ": {");
    txt += "}";
    console.log(txt);
  }
  txt = "'" + txt + "'";
  return txt;
}

function changeJSON(data: object, jsonAsString: string) {
  let jsonAsObject = JSON.parse(parseTxt(jsonAsString));
  data = { ...data, ...jsonAsObject };
  return data;
}

function changeJSONWithArray(data: object, jsonAsArray: Array<string>) {
  for (let i = 0; i < jsonAsArray.length; i++) {
    changeJSON(data, jsonAsArray[i]);
  }
  return data;
}
